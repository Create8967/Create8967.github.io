<html>
 <head>
   <meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' />
   <meta name="viewport" content="width=device-width" />
  </head>
<style>
html, body {
  overflow-x: hidden;
  overflow-y: hidden; // disable scrolling
}
body {
  position: relative;
}
</style>
<h1>Touch to get position</h1>
<p id="pos"></p>
<script>
// When true, moving the mouse draws on the canvas
let x = 0;
let y = 0;
let dx = 0;
let dy = 0;
let touching = false;
const clamp = (n, min, max) => Math.min(Math.max(n, min), max); //Clamp function
// event.offsetX, event.offsetY gives the (x,y) offset from the edge of the canvas.

// Add the event listeners for mousedown, mousemove, and mouseup
window.addEventListener('touchstart', e => {
  e.preventDefault();
  touching = true;
  x = (e.touches[0].pageX-window.innerWidth/2)/(window.innerWidth/2);
  y = (e.touches[0].pageY-window.innerHeight/2)/(window.innerHeight/2);
  dx = clamp(Math.floor(x*127),-127,127);
  dy = clamp(Math.floor(y*127),-127,127);
  document.getElementById("pos").innerHTML = "DX: " + dx +", DY: " + dy + ", Touching: " + touching;
});

window.addEventListener('touchmove', e => {
  e.preventDefault();
  touching = true;
  x = (e.touches[0].pageX-window.innerWidth/2)/(window.innerWidth/2);
  y = (e.touches[0].pageY-window.innerHeight/2)/(window.innerHeight/2);
  dx = clamp(Math.floor(x*127),-127,127);
  dy = clamp(Math.floor(y*127),-127,127);
  document.getElementById("pos").innerHTML = "DX: " + dx +", DY: " + dy + ", Touching: " + touching;
});

window.addEventListener('touchend', e => {
  touching = false;
  x = 0;
  y = 0;
  dx = clamp(Math.floor(x*127),-127,127);
  dy = clamp(Math.floor(y*127),-127,127);
  document.getElementById("pos").innerHTML = "DX: " + dx +", DY: " + dy + ", Touching: " + touching;
});
</script>
<html>
